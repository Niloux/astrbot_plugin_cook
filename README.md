# 🍳 吃点啥 - AstrBot 食谱插件

一个功能丰富的 AstrBot 食谱推荐插件，帮助你解决"今天吃什么"的难题！

## 📖 插件简介

本插件通过调用在线食谱API，为用户提供丰富的菜品推荐和制作指导。支持分类浏览、关键词搜索、随机推荐等多种功能，让做饭变得更有趣！

## ✨ 功能特性

- 🎲 **智能推荐** - 支持随机推荐和分类推荐
- 🔍 **关键词搜索** - 快速查找你想要的菜品
- 📚 **分类浏览** - 10大分类，312+种菜品
- 📖 **制作指导** - 提供详细的制作方法链接
- 🚀 **异步处理** - 使用 httpx 异步网络请求，响应迅速
- 💡 **智能提示** - 友好的错误处理和使用建议

## 📊 支持的菜品分类

| 分类 | 说明 | 分类 | 说明 |
|------|------|------|------|
| 🥘 主食 | 米饭、面条等主食类 | 🥬 素菜 | 各类蔬菜料理 |
| 🍖 荤菜 | 肉类、禽类料理 | 🐟 水产 | 鱼类、海鲜料理 |
| 🍲 汤与粥 | 各式汤品和粥类 | 🥞 早餐 | 早餐专用料理 |
| 🍰 甜点 | dessert类甜品 | 🥤 饮料 | 各类饮品制作 |
| 🧂 酱料与其他材料 | 调料制作 | 🥡 半成品加工 | 预制品处理 |

## 🚀 安装使用

### 环境要求

- Python 3.8+
- AstrBot 框架
- httpx 库

### 安装步骤

1. 将插件文件放置到 AstrBot 插件目录：
   ```
   data/plugins/astrbot_plugin_cook/
   ├── main.py
   └── README.md
   ```

2. 安装依赖（如果尚未安装）：
   ```bash
   pip install httpx
   ```

3. 重启 AstrBot，插件将自动加载

### 初始化

插件启动时会自动从远程API获取最新的食谱数据，通常需要几秒钟完成初始化。

## 📱 使用指南

### 🎯 基础命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `/菜谱分类` | 查看所有分类和帮助信息 | `/菜谱分类` |
| `/吃点啥` | 随机推荐一道菜 | `/吃点啥` |
| `/吃点啥 [分类]` | 推荐指定分类的菜品 | `/吃点啥 主食` |
| `/随机推荐` | 随机推荐3道不同菜品 | `/随机推荐` |
| `/随机推荐 [数量]` | 推荐指定数量菜品(1-10) | `/随机推荐 5` |

### 🔍 搜索功能

| 命令 | 说明 | 示例 |
|------|------|------|
| `/菜谱搜索 <关键词>` | 根据关键词搜索菜品 | `/菜谱搜索 鸡` |
| `/怎么做 <菜名>` | 获取具体菜品的制作方法 | `/怎么做 手工水饺` |

### 💡 使用技巧

1. **分类推荐**：不知道吃什么时，可以指定分类获取推荐
   ```
   /吃点啥 素菜  # 推荐素食
   /吃点啥 汤与粥  # 推荐汤类
   ```

2. **关键词搜索**：寻找特定食材的菜品
   ```
   /菜谱搜索 鸡蛋  # 查找包含鸡蛋的菜品
   /菜谱搜索 土豆  # 查找土豆相关料理
   ```

3. **制作指导**：获取详细制作步骤
   ```
   /怎么做 宫保鸡丁  # 获取制作链接和方法
   ```

## 🛠️ 技术实现

### 架构设计

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   AstrBot框架   │────│  CookPlugin 类   │────│   Recipes 类    │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                              │                         │
                              ▼                         ▼
                       ┌──────────────┐         ┌─────────────────┐
                       │  命令处理器   │         │   数据管理器     │
                       └──────────────┘         └─────────────────┘
                              │                         │
                              ▼                         ▼
                       ┌──────────────┐         ┌─────────────────┐
                       │  参数解析    │         │   httpx客户端   │
                       └──────────────┘         └─────────────────┘
```

### 核心特性

- **异步网络请求**：使用 `httpx.AsyncClient` 进行异步HTTP请求
- **数据结构优化**：字典存储菜名和URL映射，支持快速查找
- **智能分类**：自动解析API数据并按分类整理
- **参数自动解析**：利用AstrBot框架的自动参数解析功能
- **错误处理**：完善的异常处理和用户友好的错误提示

### 数据源

- **API地址**：`https://cook.aiursoft.cn/search/search_index.json`
- **网站地址**：`https://cook.aiursoft.cn/`
- **数据格式**：JSON格式的菜品索引数据

## 🐛 故障排除

### 常见问题

1. **插件初始化失败**
   - 检查网络连接是否正常
   - 确认API地址是否可访问
   - 查看日志中的具体错误信息

2. **命令无响应**
   - 确认插件已正确加载
   - 检查命令格式是否正确
   - 查看AstrBot日志排查问题

3. **搜索结果为空**
   - 尝试使用更通用的关键词
   - 确认数据已正确加载
   - 使用 `/菜谱分类` 查看可用菜品

### 日志信息

插件会在以下情况输出日志：
- 初始化开始和完成
- 网络请求错误
- 数据解析异常
- 插件卸载

## 🔄 更新日志

### v1.0.0 (当前版本)
- ✅ 完整的食谱推荐功能
- ✅ 支持10个菜品分类
- ✅ 关键词搜索功能
- ✅ 异步网络请求
- ✅ 自动参数解析
- ✅ 友好的错误处理

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个插件！

### 开发环境

1. 克隆项目到本地
2. 安装开发依赖：`pip install httpx astrbot`
3. 运行测试：`python test.py`

### 提交规范

- 代码风格遵循PEP 8
- 提交信息使用中文，格式清晰
- 添加必要的注释和文档

## 📄 许可证

本项目基于 MIT 许可证开源。

## 🙏 致谢

- 感谢 [cook.aiursoft.cn](https://cook.aiursoft.cn) 提供的食谱数据
- 感谢 AstrBot 框架的支持
- 感谢所有为这个项目贡献的开发者

---

**享受烹饪的乐趣！** 🍳✨
